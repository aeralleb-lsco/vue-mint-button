{"remainingRequest":"/Users/bel902/Documents/vue-mint-button/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/bel902/Documents/vue-mint-button/src/MintButton.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/bel902/Documents/vue-mint-button/src/MintButton.vue","mtime":1652313588269},{"path":"/Users/bel902/Documents/vue-mint-button/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bel902/Documents/vue-mint-button/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/bel902/Documents/vue-mint-button/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/bel902/Documents/vue-mint-button/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bel902/Documents/vue-mint-button/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmJ0biB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgbGluZS1oZWlnaHQ6IDEuNTsKICBjb2xvcjogIzA1MDUwNTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgY3Vyc29yOiBwb2ludGVyOwogIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7CiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsKICB1c2VyLXNlbGVjdDogbm9uZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICBib3JkZXI6IDFweCBzb2xpZCAjMDUwNTA1OwogIHBhZGRpbmc6IDAuMzc1cmVtIDAuNzVyZW07CiAgZm9udC1zaXplOiAxcmVtOwogIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07CiAgdHJhbnNpdGlvbjogY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJhY2tncm91bmQtY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsCiAgICBib3JkZXItY29sb3IgMC4xNXMgZWFzZS1pbi1vdXQsIGJveC1zaGFkb3cgMC4xNXMgZWFzZS1pbi1vdXQ7Cn0KCi5idG46aG92ZXIgewogIGJhY2tncm91bmQtY29sb3I6ICMwNTA1MDU7CiAgY29sb3I6ICNmZmZmZmY7Cn0KCi5mYWRlSW4gewogIC13ZWJraXQtYW5pbWF0aW9uOiBmYWRlSW4gMi41cyBjdWJpYy1iZXppZXIoMC4zOSwgMC41NzUsIDAuNTY1LCAxKSBib3RoOwogIGFuaW1hdGlvbjogZmFkZUluIDIuNXMgY3ViaWMtYmV6aWVyKDAuMzksIDAuNTc1LCAwLjU2NSwgMSkgYm90aDsKfQoKQC13ZWJraXQta2V5ZnJhbWVzIGZhZGVJbiB7CiAgMCUgewogICAgb3BhY2l0eTogMDsKICB9CiAgMTAwJSB7CiAgICBvcGFjaXR5OiAxOwogIH0KfQpAa2V5ZnJhbWVzIGZhZGVJbiB7CiAgMCUgewogICAgb3BhY2l0eTogMDsKICB9CiAgMTAwJSB7CiAgICBvcGFjaXR5OiAxOwogIH0KfQoKaW5wdXQgewogIGZvbnQtc2l6ZTogMS41cmVtOwogIGJvcmRlci1yYWRpdXM6IDVweDsKICBtYXJnaW46IDVweCAwOwp9CgppbnB1dDpmb2N1cyB7CiAgb3V0bGluZTogcmdiYSgwLCAwLCAwLCAwLjUpIHNvbGlkIDJweDsKICAtbW96LWJveC1zaGFkb3c6IDAgMCAxMHB4IDFweCByZ2JhKDAsIDAsIDAsIDAuOCk7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDAgMTBweCAxcHggcmdiYSgwLCAwLCAwLCAwLjgpOwogIGJveC1zaGFkb3c6IDAgMCAxMHB4IDFweCByZ2JhKDAsIDAsIDAsIDAuOCk7Cn0KCi5tLXRvcC0xIHsKICBtYXJnaW4tdG9wOiAxZW07Cn0KCi5taW50LXdyYXBwZXIgewogIHBhZGRpbmc6IDMwcHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9CgpwIHsKICBtYXJnaW46IDA7Cn0KCnAuc21hbGwgewogIGZvbnQtc2l6ZTogMC45cmVtOwogIGZvbnQtc3R5bGU6IGl0YWxpYzsKICBjb2xvcjogIzdkN2Q3ZDsKfQo="},{"version":3,"sources":["MintButton.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"MintButton.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div class=\"mint-wrapper\">\n    <div class=\"fadeIn\" v-if=\"account\">\n      <div>\n        <p>You are minting with:</p>\n        <h3>\n          {{ account }}\n        </h3>\n      </div>\n\n      <input class=\"mint-amount\" type=\"number\" v-model=\"amount\" />\n      <p class=\"small\">\n        NFT<span v-if=\"amount > 1\">s</span> paying {{ total }} ETH<br />\n      </p>\n      <div class=\"btn mint-btn m-top-1\" v-if=\"!isMinting\" @click=\"mint()\">\n        Mint Now\n      </div>\n      <p class=\"m-top-1\" v-if=\"isMinting && !pending\">\n        Please confirm the transaction in Metamask\n      </p>\n      <p class=\"m-top-1\" v-if=\"isMinting && pending\">\n        Your transaction was submitted, waiting for confirmation at:\n      </p>\n      <a\n        v-if=\"explorerUrl !== undefined\"\n        :href=\"explorerUrl + pending\"\n        target=\"_blank\"\n        >{{ pending }}</a\n      >\n      <p v-if=\"explorerUrl === undefined\">{{ pending }}</p>\n    </div>\n    <div v-if=\"!account\">\n      <div class=\"btn mint-btn\" @click=\"connect()\">Connect Wallet</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Web3 from \"web3\";\nimport Web3Modal from \"web3modal\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\n\nexport default {\n  props: [\n    \"ABI\",\n    \"network\",\n    \"price\",\n    \"method\",\n    \"contract\",\n    \"infuraId\",\n    \"explorerUrl\",\n    \"parameters\"\n  ],\n  name: \"MintButton\",\n  data() {\n    return {\n      account: \"\",\n      balance: 0,\n      total: 0,\n      amount: 1,\n      isMinting: false,\n      web3: \"\",\n      pending: \"\",\n      networks: {\n        ethereum: 1,\n        rinkeby: 4,\n        polygon: 137,\n        mumbai: 80001,\n        ganache: 5777,\n      },\n    };\n  },\n  watch: {\n    amount() {\n      const app = this;\n      if (app.amount > 5) {\n        app.amount = 5;\n      }\n      if (app.amount <= 0) {\n        app.amount = 1;\n      }\n      app.total = (app.price * app.amount).toFixed(3);\n      console.log(\"---------watching total------------\", app.price, app.amount);\n    },\n  },\n  methods: {\n    async connect() {\n      const app = this;\n      let providerOptions = {};\n      if (app.infuraId !== undefined) {\n        providerOptions = {\n          walletconnect: {\n            package: WalletConnectProvider,\n            options: {\n              infuraId: app.infuraId,\n            },\n          },\n        };\n      }\n      // Instantiating Web3Modal\n      const web3Modal = new Web3Modal({\n        cacheProvider: true,\n        providerOptions: providerOptions,\n      });\n      const provider = await web3Modal.connect();\n      app.web3 = await new Web3(provider);\n      // Checking if networkId matches\n      const netId = await app.web3.eth.net.getId();\n      if (parseInt(netId) !== app.networks[app.network]) {\n        alert(\"Switch to \" + app.network + \" network!\");\n      } else {\n        const accounts = await app.web3.eth.getAccounts();\n        if (accounts.length > 0) {\n          app.balance = await app.web3.eth.getBalance(accounts[0]);\n          app.account = accounts[0];\n          app.balance = parseFloat(\n            app.web3.utils.fromWei(app.balance, \"ether\")\n          ).toFixed(10);\n        }\n      }\n    },\n    async mint() {\n      const app = this;\n      if (!app.isMinting) {\n        app.isMinting = true;\n        try {\n          const nftContract = new app.web3.eth.Contract(app.ABI, app.contract);\n          const wei = app.web3.utils.toWei(app.total.toString(), \"ether\");\n          console.log(\"------------contract-------------\", this.contract);\n          const estimated = await nftContract.methods[app.method]().apply(null, app.parameters).estimateGas(\n            {\n              from: app.account,\n              value: wei.toString(),\n            }\n          );\n          const gasLimit = parseInt(estimated * 1.2).toString();\n          await nftContract.methods[app.method]()\n            .send({\n              from: app.account,\n              value: wei.toString(),\n              gas: gasLimit,\n            })\n            .on(\"transactionHash\", (pending) => {\n              app.pending = pending;\n            });\n        } catch (e) {\n          alert(e.message);\n          app.isMinting = false;\n        }\n      }\n    },\n  },\n  mounted() {\n    this.total = this.price;\n  },\n};\n</script>\n\n<style>\n.btn {\n  display: inline-block;\n  font-weight: 400;\n  line-height: 1.5;\n  color: #050505;\n  text-align: center;\n  text-decoration: none;\n  vertical-align: middle;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n  background-color: transparent;\n  border: 1px solid #050505;\n  padding: 0.375rem 0.75rem;\n  font-size: 1rem;\n  border-radius: 0.25rem;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n\n.btn:hover {\n  background-color: #050505;\n  color: #ffffff;\n}\n\n.fadeIn {\n  -webkit-animation: fadeIn 2.5s cubic-bezier(0.39, 0.575, 0.565, 1) both;\n  animation: fadeIn 2.5s cubic-bezier(0.39, 0.575, 0.565, 1) both;\n}\n\n@-webkit-keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\ninput {\n  font-size: 1.5rem;\n  border-radius: 5px;\n  margin: 5px 0;\n}\n\ninput:focus {\n  outline: rgba(0, 0, 0, 0.5) solid 2px;\n  -moz-box-shadow: 0 0 10px 1px rgba(0, 0, 0, 0.8);\n  -webkit-box-shadow: 0 0 10px 1px rgba(0, 0, 0, 0.8);\n  box-shadow: 0 0 10px 1px rgba(0, 0, 0, 0.8);\n}\n\n.m-top-1 {\n  margin-top: 1em;\n}\n\n.mint-wrapper {\n  padding: 30px;\n  text-align: center;\n}\n\np {\n  margin: 0;\n}\n\np.small {\n  font-size: 0.9rem;\n  font-style: italic;\n  color: #7d7d7d;\n}\n</style>\n"]}]}